-- 1. Создать и заполнить таблицы лайков и постов.

USE vk;

-- Таблица лайков
DROP TABLE IF EXISTS likes;
CREATE TABLE likes (
  id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  user_id INT UNSIGNED NOT NULL,
  target_id INT UNSIGNED NOT NULL,
  target_type_id INT UNSIGNED NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Таблица типов лайков
DROP TABLE IF EXISTS target_types;
CREATE TABLE target_types (
  id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL UNIQUE,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

INSERT INTO target_types (name) VALUES 
  ('messages'),
  ('users'),
  ('media'),
  ('posts');

-- Заполняем лайки
INSERT INTO likes 
  SELECT 
    id, 
    FLOOR(1 + (RAND() * 100)), 
    FLOOR(1 + (RAND() * 100)),
    FLOOR(1 + (RAND() * 4)),
    CURRENT_TIMESTAMP 
  FROM messages;

-- Проверим
SELECT * FROM likes LIMIT 10;

-- Создадим таблицу постов
CREATE TABLE posts (
  id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  user_id INT UNSIGNED NOT NULL,
  community_id INT UNSIGNED,
  head VARCHAR(255),
  body TEXT NOT NULL,
  media_id INT UNSIGNED,
  is_public BOOLEAN DEFAULT TRUE,
  is_archived BOOLEAN DEFAULT FALSE,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


-- исправить
-- Заполнение таблицы posts
INSERT INTO
  posts (user_id, community_id, head, body, media_id, is_public, is_archived)
VALUES
  ('107', '19', 'Заголовок 1', 'Пост 1', '105', '1', '0'),
  ('140', '16', 'Заголовок 2', 'Пост 2', '15', '1', '0'),
  ('35', '9', 'Заголовок 3', 'Пост 3', '54', '1', '1'),
  ('63', '6', 'Заголовок 4', 'Пост 4', '89', '0', '1'),
  ('35', '7', 'Заголовок 5', 'Пост 5', '93', '0', '0'),
  ('196', '3', 'Заголовок 6', 'Пост 6', '107', '1', '1'),
  ('26', '22', 'Заголовок 7', 'Пост 7', '9', '1', '1'),
  ('95', '22', 'Заголовок 8', 'Пост 8', '35', '0', '1'),
  ('57', '18', 'Заголовок 9', 'Пост 9', '3', '1', '1'),
  ('136', '20', 'Заголовок 10', 'Пост 10', '127', '0', '1'),
  ('103', '23', 'Заголовок 11', 'Пост 11', '121', '0', '0'),
  ('196', '4', 'Заголовок 12', 'Пост 12', '63', '0', '0'),
  ('168', '17', 'Заголовок 13', 'Пост 13', '118', '0', '0'),
  ('138', '13', 'Заголовок 14', 'Пост 14', '126', '1', '1'),
  ('142', '1', 'Заголовок 15', 'Пост 15', '93', '0', '0'),
  ('99', '6', 'Заголовок 16', 'Пост 16', '53', '0', '1'),
  ('163', '8', 'Заголовок 17', 'Пост 17', '85', '1', '1'),
  ('160', '7', 'Заголовок 18', 'Пост 18', '65', '1', '0'),
  ('173', '13', 'Заголовок 19', 'Пост 19', '79', '0', '0'),
  ('75', '12', 'Заголовок 20', 'Пост 20', '77', '1', '0'),
  ('173', '6', 'Заголовок 21', 'Пост 21', '144', '0', '0'),
  ('106', '17', 'Заголовок 22', 'Пост 22', '115', '0', '0'),
  ('133', '2', 'Заголовок 23', 'Пост 23', '74', '1', '0'),
  ('128', '12', 'Заголовок 24', 'Пост 24', '70', '1', '0'),
  ('131', '15', 'Заголовок 25', 'Пост 25', '8', '0', '0'),
  ('93', '12', 'Заголовок 26', 'Пост 26', '59', '1', '1'),
  ('25', '24', 'Заголовок 27', 'Пост 27', '77', '0', '1'),
  ('176', '24', 'Заголовок 28', 'Пост 28', '137', '0', '0'),
  ('20', '9', 'Заголовок 29', 'Пост 29', '14', '0', '0'),
  ('33', '5', 'Заголовок 30', 'Пост 30', '64', '0', '1'),
  ('176', '11', 'Заголовок 31', 'Пост 31', '54', '1', '1'),
  ('158', '21', 'Заголовок 32', 'Пост 32', '127', '0', '1'),
  ('65', '5', 'Заголовок 33', 'Пост 33', '146', '1', '0'),
  ('110', '8', 'Заголовок 34', 'Пост 34', '129', '1', '1'),
  ('42', '1', 'Заголовок 35', 'Пост 35', '81', '1', '0'),
  ('198', '11', 'Заголовок 36', 'Пост 36', '48', '1', '0'),
  ('107', '14', 'Заголовок 37', 'Пост 37', '115', '1', '1'),
  ('96', '16', 'Заголовок 38', 'Пост 38', '140', '1', '0'),
  ('40', '6', 'Заголовок 39', 'Пост 39', '55', '0', '0'),
  ('53', '7', 'Заголовок 40', 'Пост 40', '4', '1', '1'),
  ('180', '20', 'Заголовок 41', 'Пост 41', '21', '0', '0'),
  ('65', '9', 'Заголовок 42', 'Пост 42', '44', '1', '1'),
  ('52', '22', 'Заголовок 43', 'Пост 43', '134', '1', '1'),
  ('37', '7', 'Заголовок 44', 'Пост 44', '95', '0', '0'),
  ('124', '25', 'Заголовок 45', 'Пост 45', '40', '1', '1'),
  ('177', '4', 'Заголовок 46', 'Пост 46', '11', '0', '0'),
  ('137', '19', 'Заголовок 47', 'Пост 47', '91', '0', '1'),
  ('112', '23', 'Заголовок 48', 'Пост 48', '83', '0', '0'),
  ('10', '4', 'Заголовок 49', 'Пост 49', '8', '1', '1'),
  ('80', '2', 'Заголовок 50', 'Пост 50', '135', '1', '0'),
  ('159', '7', 'Заголовок 51', 'Пост 51', '105', '0', '1'),
  ('142', '6', 'Заголовок 52', 'Пост 52', '20', '0', '1'),
  ('6', '12', 'Заголовок 53', 'Пост 53', '54', '0', '1'),
  ('24', '23', 'Заголовок 54', 'Пост 54', '24', '0', '1'),
  ('60', '9', 'Заголовок 55', 'Пост 55', '130', '0', '1'),
  ('156', '25', 'Заголовок 56', 'Пост 56', '101', '0', '0'),
  ('63', '8', 'Заголовок 57', 'Пост 57', '64', '1', '1'),
  ('197', '10', 'Заголовок 58', 'Пост 58', '142', '0', '1'),
  ('198', '2', 'Заголовок 59', 'Пост 59', '85', '1', '1'),
  ('8', '1', 'Заголовок 60', 'Пост 60', '92', '1', '0'),
  ('165', '19', 'Заголовок 61', 'Пост 61', '97', '0', '1'),
  ('59', '7', 'Заголовок 62', 'Пост 62', '27', '1', '1'),
  ('146', '15', 'Заголовок 63', 'Пост 63', '77', '1', '1'),
  ('8', '14', 'Заголовок 64', 'Пост 64', '145', '1', '0'),
  ('120', '3', 'Заголовок 65', 'Пост 65', '96', '0', '1'),
  ('121', '3', 'Заголовок 66', 'Пост 66', '104', '1', '0'),
  ('95', '12', 'Заголовок 67', 'Пост 67', '45', '0', '0'),
  ('113', '21', 'Заголовок 68', 'Пост 68', '143', '1', '0'),
  ('1', '11', 'Заголовок 69', 'Пост 69', '34', '0', '1'),
  ('50', '24', 'Заголовок 70', 'Пост 70', '131', '1', '0'),
  ('107', '22', 'Заголовок 71', 'Пост 71', '115', '0', '1'),
  ('168', '17', 'Заголовок 72', 'Пост 72', '72', '1', '0'),
  ('84', '3', 'Заголовок 73', 'Пост 73', '133', '1', '0'),
  ('199', '20', 'Заголовок 74', 'Пост 74', '115', '0', '1'),
  ('57', '2', 'Заголовок 75', 'Пост 75', '120', '0', '1'),
  ('92', '20', 'Заголовок 76', 'Пост 76', '41', '0', '0'),
  ('173', '15', 'Заголовок 77', 'Пост 77', '67', '1', '1'),
  ('35', '16', 'Заголовок 78', 'Пост 78', '19', '1', '0'),
  ('166', '10', 'Заголовок 79', 'Пост 79', '72', '1', '0'),
  ('67', '6', 'Заголовок 80', 'Пост 80', '131', '1', '1'),
  ('121', '9', 'Заголовок 81', 'Пост 81', '68', '0', '1'),
  ('53', '8', 'Заголовок 82', 'Пост 82', '98', '0', '1'),
  ('92', '21', 'Заголовок 83', 'Пост 83', '37', '1', '0'),
  ('186', '24', 'Заголовок 84', 'Пост 84', '85', '1', '1'),
  ('171', '7', 'Заголовок 85', 'Пост 85', '87', '1', '1'),
  ('146', '1', 'Заголовок 86', 'Пост 86', '61', '0', '0'),
  ('62', '6', 'Заголовок 87', 'Пост 87', '86', '0', '1'),
  ('153', '16', 'Заголовок 88', 'Пост 88', '113', '1', '1'),
  ('101', '10', 'Заголовок 89', 'Пост 89', '96', '0', '0'),
  ('144', '12', 'Заголовок 90', 'Пост 90', '101', '0', '0'),
  ('34', '25', 'Заголовок 91', 'Пост 91', '84', '0', '0'),
  ('36', '12', 'Заголовок 92', 'Пост 92', '128', '0', '1'),
  ('114', '2', 'Заголовок 93', 'Пост 93', '115', '1', '1'),
  ('161', '9', 'Заголовок 94', 'Пост 94', '62', '1', '1'),
  ('154', '5', 'Заголовок 95', 'Пост 95', '139', '1', '1'),
  ('111', '23', 'Заголовок 96', 'Пост 96', '74', '1', '0'),
  ('158', '12', 'Заголовок 97', 'Пост 97', '65', '0', '0'),
  ('97', '4', 'Заголовок 98', 'Пост 98', '130', '0', '0'),
  ('2', '9', 'Заголовок 99', 'Пост 99', '46', '1', '1'),
  ('19', '11', 'Заголовок 100', 'Пост 100', '105', '0', '1'),
  ('147', '21', 'Заголовок 101', 'Пост 101', '124', '1', '0'),
  ('42', '16', 'Заголовок 102', 'Пост 102', '14', '1', '0'),
  ('159', '25', 'Заголовок 103', 'Пост 103', '60', '0', '1'),
  ('160', '17', 'Заголовок 104', 'Пост 104', '85', '1', '1'),
  ('154', '2', 'Заголовок 105', 'Пост 105', '28', '1', '0'),
  ('49', '12', 'Заголовок 106', 'Пост 106', '65', '1', '1'),
  ('100', '13', 'Заголовок 107', 'Пост 107', '118', '1', '0'),
  ('129', '6', 'Заголовок 108', 'Пост 108', '132', '0', '0'),
  ('85', '15', 'Заголовок 109', 'Пост 109', '137', '1', '0'),
  ('21', '2', 'Заголовок 110', 'Пост 110', '54', '0', '0'),
  ('10', '21', 'Заголовок 111', 'Пост 111', '74', '1', '1'),
  ('190', '12', 'Заголовок 112', 'Пост 112', '50', '1', '0'),
  ('74', '5', 'Заголовок 113', 'Пост 113', '90', '0', '0'),
  ('149', '10', 'Заголовок 114', 'Пост 114', '125', '0', '1'),
  ('67', '14', 'Заголовок 115', 'Пост 115', '71', '1', '0'),
  ('4', '15', 'Заголовок 116', 'Пост 116', '58', '1', '0'),
  ('145', '13', 'Заголовок 117', 'Пост 117', '4', '1', '1'),
  ('9', '13', 'Заголовок 118', 'Пост 118', '113', '1', '1'),
  ('22', '13', 'Заголовок 119', 'Пост 119', '12', '1', '1'),
  ('42', '13', 'Заголовок 120', 'Пост 120', '77', '1', '0'),
  ('112', '25', 'Заголовок 121', 'Пост 121', '91', '0', '0'),
  ('5', '25', 'Заголовок 122', 'Пост 122', '139', '1', '0'),
  ('60', '7', 'Заголовок 123', 'Пост 123', '102', '0', '1'),
  ('55', '16', 'Заголовок 124', 'Пост 124', '58', '1', '0'),
  ('188', '7', 'Заголовок 125', 'Пост 125', '19', '1', '1'),
  ('84', '23', 'Заголовок 126', 'Пост 126', '104', '1', '1'),
  ('123', '19', 'Заголовок 127', 'Пост 127', '58', '0', '1'),
  ('28', '4', 'Заголовок 128', 'Пост 128', '106', '0', '1'),
  ('93', '3', 'Заголовок 129', 'Пост 129', '48', '1', '0'),
  ('114', '22', 'Заголовок 130', 'Пост 130', '12', '1', '0'),
  ('90', '9', 'Заголовок 131', 'Пост 131', '125', '1', '0'),
  ('164', '6', 'Заголовок 132', 'Пост 132', '103', '1', '0'),
  ('194', '20', 'Заголовок 133', 'Пост 133', '1', '1', '1'),
  ('184', '10', 'Заголовок 134', 'Пост 134', '16', '0', '1'),
  ('108', '9', 'Заголовок 135', 'Пост 135', '96', '0', '0'),
  ('70', '15', 'Заголовок 136', 'Пост 136', '146', '1', '0'),
  ('142', '10', 'Заголовок 137', 'Пост 137', '70', '1', '0'),
  ('3', '25', 'Заголовок 138', 'Пост 138', '10', '0', '0'),
  ('87', '20', 'Заголовок 139', 'Пост 139', '73', '0', '1'),
  ('139', '21', 'Заголовок 140', 'Пост 140', '79', '1', '1'),
  ('200', '10', 'Заголовок 141', 'Пост 141', '32', '1', '1'),
  ('94', '24', 'Заголовок 142', 'Пост 142', '134', '1', '0'),
  ('5', '7', 'Заголовок 143', 'Пост 143', '10', '0', '1'),
  ('82', '24', 'Заголовок 144', 'Пост 144', '58', '0', '0'),
  ('131', '14', 'Заголовок 145', 'Пост 145', '1', '1', '0'),
  ('132', '25', 'Заголовок 146', 'Пост 146', '85', '0', '1'),
  ('116', '10', 'Заголовок 147', 'Пост 147', '135', '0', '1'),
  ('174', '3', 'Заголовок 148', 'Пост 148', '5', '1', '0'),
  ('110', '17', 'Заголовок 149', 'Пост 149', '137', '1', '1'),
  ('162', '14', 'Заголовок 150', 'Пост 150', '10', '0', '1'),
  ('19', '7', 'Заголовок 151', 'Пост 151', '115', '0', '0'),
  ('163', '14', 'Заголовок 152', 'Пост 152', '75', '0', '1'),
  ('93', '18', 'Заголовок 153', 'Пост 153', '53', '0', '1'),
  ('82', '18', 'Заголовок 154', 'Пост 154', '106', '1', '0'),
  ('39', '20', 'Заголовок 155', 'Пост 155', '73', '1', '0'),
  ('190', '12', 'Заголовок 156', 'Пост 156', '44', '0', '1'),
  ('185', '18', 'Заголовок 157', 'Пост 157', '3', '1', '0'),
  ('169', '1', 'Заголовок 158', 'Пост 158', '141', '0', '1'),
  ('199', '18', 'Заголовок 159', 'Пост 159', '111', '0', '0'),
  ('30', '19', 'Заголовок 160', 'Пост 160', '25', '1', '0'),
  ('72', '2', 'Заголовок 161', 'Пост 161', '68', '1', '0'),
  ('51', '21', 'Заголовок 162', 'Пост 162', '137', '1', '0'),
  ('67', '11', 'Заголовок 163', 'Пост 163', '11', '0', '1'),
  ('77', '13', 'Заголовок 164', 'Пост 164', '126', '0', '1'),
  ('190', '18', 'Заголовок 165', 'Пост 165', '111', '0', '0'),
  ('60', '1', 'Заголовок 166', 'Пост 166', '4', '1', '1'),
  ('192', '15', 'Заголовок 167', 'Пост 167', '10', '1', '0'),
  ('174', '8', 'Заголовок 168', 'Пост 168', '12', '1', '1'),
  ('132', '9', 'Заголовок 169', 'Пост 169', '96', '1', '0'),
  ('139', '12', 'Заголовок 170', 'Пост 170', '44', '1', '1'),
  ('121', '4', 'Заголовок 171', 'Пост 171', '22', '0', '0'),
  ('104', '23', 'Заголовок 172', 'Пост 172', '135', '1', '0'),
  ('80', '12', 'Заголовок 173', 'Пост 173', '56', '1', '1'),
  ('102', '6', 'Заголовок 174', 'Пост 174', '40', '1', '1'),
  ('91', '5', 'Заголовок 175', 'Пост 175', '34', '0', '0'),
  ('179', '7', 'Заголовок 176', 'Пост 176', '51', '1', '1'),
  ('48', '6', 'Заголовок 177', 'Пост 177', '10', '0', '1'),
  ('89', '25', 'Заголовок 178', 'Пост 178', '6', '0', '1'),
  ('52', '2', 'Заголовок 179', 'Пост 179', '3', '1', '1'),
  ('108', '14', 'Заголовок 180', 'Пост 180', '140', '1', '1'),
  ('99', '13', 'Заголовок 181', 'Пост 181', '113', '0', '0'),
  ('128', '19', 'Заголовок 182', 'Пост 182', '136', '0', '0'),
  ('92', '15', 'Заголовок 183', 'Пост 183', '42', '0', '0'),
  ('50', '25', 'Заголовок 184', 'Пост 184', '8', '0', '1'),
  ('159', '25', 'Заголовок 185', 'Пост 185', '46', '0', '0'),
  ('82', '1', 'Заголовок 186', 'Пост 186', '91', '1', '0'),
  ('141', '22', 'Заголовок 187', 'Пост 187', '107', '1', '1'),
  ('188', '10', 'Заголовок 188', 'Пост 188', '101', '1', '1'),
  ('122', '2', 'Заголовок 189', 'Пост 189', '61', '0', '0'),
  ('118', '9', 'Заголовок 190', 'Пост 190', '122', '1', '0'),
  ('199', '25', 'Заголовок 191', 'Пост 191', '128', '1', '0'),
  ('191', '4', 'Заголовок 192', 'Пост 192', '74', '0', '0'),
  ('71', '21', 'Заголовок 193', 'Пост 193', '102', '1', '0'),
  ('97', '25', 'Заголовок 194', 'Пост 194', '65', '0', '1'),
  ('13', '14', 'Заголовок 195', 'Пост 195', '55', '0', '1'),
  ('197', '15', 'Заголовок 196', 'Пост 196', '141', '1', '1'),
  ('136', '8', 'Заголовок 197', 'Пост 197', '25', '0', '0'),
  ('78', '13', 'Заголовок 198', 'Пост 198', '12', '1', '1'),
  ('55', '15', 'Заголовок 199', 'Пост 199', '101', '1', '0'),
  ('127', '18', 'Заголовок 200', 'Пост 200', '24', '1', '1');


 
 
 